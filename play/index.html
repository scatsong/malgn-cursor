<!doctype html>
<html lang="ko">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>HTML5 ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ìƒ˜í”Œ</title>
		<style>
			:root{ --bg:#0f1720; --card:#0b1220; --accent:#06b6d4; --muted:#94a3b8 }
			html,body{height:100%;margin:0;background:linear-gradient(180deg,#071124 0%,#081827 100%);font-family:Inter,Segoe UI,Roboto,'Noto Sans KR',sans-serif;color:#e6eef6}
			.container{max-width:980px;margin:48px auto;padding:20px}
			.player{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.04);border-radius:12px;overflow:hidden}
			.video-wrap{position:relative;background:#000}
			video{width:100%;height:auto;display:block;background:#000}
			.controls{display:flex;align-items:center;gap:10px;padding:12px;background:linear-gradient(180deg, rgba(10,14,20,0.6), rgba(6,10,16,0.6));backdrop-filter:blur(6px);box-shadow:0 6px 18px rgba(2,6,23,0.6);border-top:1px solid rgba(255,255,255,0.02)}
			.btn{background:rgba(255,255,255,0.02);border:0;color:var(--accent);padding:8px 10px;border-radius:8px;cursor:pointer;display:inline-flex;align-items:center;gap:6px}
			.btn:hover{background:rgba(255,255,255,0.04)}
			.btn:focus{outline:2px solid rgba(6,182,212,0.18);box-shadow:0 4px 12px rgba(6,182,212,0.06)}
			/* play button prominence */
					#playBtn{font-size:18px;padding:10px 12px;border-radius:10px;background:linear-gradient(180deg,var(--accent),#7c3aed);color:#ffffff;font-weight:700;box-shadow:0 6px 18px rgba(124,58,237,0.12)}
					.play-glyph{font-size:16px;color:#061021}
			#playBtn:hover{transform:translateY(-1px)}
			/* select / input styling */
					select{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.12);color:#ffffff;padding:6px 10px;border-radius:8px;min-width:84px;appearance:none;-webkit-appearance:none}
					select option{color:#061021;background:#fff}
					/* custom select */
					.custom-select{position:relative;display:inline-block;min-width:84px}
					.custom-select__trigger{background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:8px;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.04)}
					.custom-select__trigger:focus{outline:2px solid rgba(6,182,212,0.12)}
					.custom-select__options{position:absolute;left:0;top:calc(100% + 6px);background:#0b1220;border:1px solid rgba(255,255,255,0.04);border-radius:8px;list-style:none;padding:6px 0;margin:0;min-width:120px;box-shadow:0 8px 24px rgba(0,0,0,0.6);display:none;z-index:10010}
					.custom-select__options.open{display:block;animation:fadeIn 160ms ease-out}
					@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
					.custom-select__options li:focus{outline:2px solid rgba(6,182,212,0.12);background:rgba(255,255,255,0.02)}
					.custom-select__options li{padding:8px 12px;color:var(--muted);cursor:pointer}
					.custom-select__options li[aria-selected="true"], .custom-select__options li:hover{background:rgba(255,255,255,0.03);color:#e6eef6}
					.caret{margin-left:6px;color:var(--muted)}
			select option{color:#061021;background:#fff}
			input[type=range]{-webkit-appearance:none;appearance:none;background:transparent}
			input[type=range]::-webkit-slider-runnable-track{height:6px;background:linear-gradient(90deg,var(--accent),#7c3aed);border-radius:6px}
			input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,0.4);margin-top:-4px}
			.time{font-size:13px;color:var(--muted);min-width:72px;text-align:center}
			/* progress bar polishing */
			.progress{flex:1;height:10px;background:rgba(255,255,255,0.04);border-radius:8px;overflow:hidden;cursor:pointer}
			.progress > i{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#7c3aed);display:block}
			.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
			.progress{flex:1;height:8px;background:rgba(255,255,255,0.06);border-radius:6px;overflow:hidden;cursor:pointer}
			.progress > i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),#7c3aed)}
			.right{display:flex;align-items:center;gap:8px}
			.time{font-size:13px;color:var(--muted);min-width:72px;text-align:center}
			.caption-toggle{font-size:13px;color:var(--muted);cursor:pointer}
			@media (max-width:520px){.controls{flex-wrap:wrap}.time{min-width:56px}}
			/* Responsive adjustments for controls */
					@media (max-width:720px){
						.controls{flex-wrap:wrap;align-items:center;gap:8px;padding:8px}
						#playBtn{padding:8px}
						select, .time{font-size:13px}
						.settings-btn{display:inline-flex}
					}
					@media (max-width:420px){
						.controls{padding:6px;gap:6px}
						/* hide less critical labels */
						#previewDurLabel, #previewInfo{display:none}
						.time{display:none}
						/* make selects compact */
						select{padding:4px 8px;min-width:64px}
					}
					/* Ensure controls sit above video/poster overlays */
					.video-wrap{position:relative;z-index:0}
					video{position:relative;z-index:0}
					.controls{position:relative;z-index:10020}
					.controls .btn, .custom-select{z-index:10021}
			/* ìë§‰ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
			.sub-overlay{position:absolute;left:0;right:0;bottom:6%;display:flex;justify-content:center;pointer-events:none;padding:0 6%;}
		:root{ --sub-in-duration:220ms; --sub-out-duration:240ms; --sub-easing: cubic-bezier(.2,.9,.2,1);
			 --sub-font-size:20px; --sub-color:#ffffff; --sub-bg-opacity:0.6; --sub-font-family:system-ui,Segoe UI,Roboto,'Noto Sans KR',sans-serif; --sub-bottom-offset:6%; }
		.sub-overlay{position:absolute;left:0;right:0;bottom:var(--sub-bottom-offset,6%);display:flex;flex-direction:column;align-items:center;gap:8px;pointer-events:none;padding:0 6%;}
			.sub-overlay .cue{background:rgba(0,0,0,var(--sub-bg-opacity,0.6));color:var(--sub-color,#fff);padding:8px 12px;border-radius:6px;font-size:var(--sub-font-size,20px);line-height:1.3;max-width:90%;text-align:center;box-shadow:0 6px 18px rgba(0,0,0,0.6);text-shadow:0 2px 4px rgba(0,0,0,0.6);opacity:0;transform:translateY(8px);font-family:var(--sub-font-family);}
			/* ì• ë‹ˆë©”ì´ì…˜ */
			@keyframes subIn { from { opacity:0; transform:translateY(8px) scale(0.98); } to { opacity:1; transform:translateY(0) scale(1); } }
			@keyframes subOut { from { opacity:1; transform:translateY(0) scale(1); } to { opacity:0; transform:translateY(6px) scale(0.98); } }
			.sub-overlay .cue.in{ animation: subIn var(--sub-in-duration) var(--sub-easing) forwards; }
			.sub-overlay .cue.out{ animation: subOut var(--sub-out-duration) ease forwards; }
			/* settings panel */
			.settings-btn{background:transparent;border:0;color:var(--muted);padding:6px;border-radius:6px;cursor:pointer}
			.settings-panel{position:absolute;right:12px;bottom:68px;background:rgba(2,6,23,0.95);padding:12px;border-radius:8px;color:var(--muted);font-size:13px;border:1px solid rgba(255,255,255,0.03);z-index:60;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
			.settings-panel label{display:block;margin-bottom:6px}
			.settings-panel input[type=range]{width:160px}
			@media (max-width:520px){ .sub-overlay .cue{font-size:16px;padding:6px 10px} }
			/* ensure controls and their children accept pointer events */
			.controls, .controls * { pointer-events: auto }
		</style>
	</head>
	<body>
		<div class="container">
			<h1>HTML5 ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ìƒ˜í”Œ</h1>
			<p>ê¸°ë³¸ í”Œë ˆì´ì–´ ê¸°ëŠ¥: ì¬ìƒ, ì¼ì‹œì •ì§€, íƒìƒ‰ë°”, ìŒëŸ‰, ì „ì²´í™”ë©´, ìë§‰, í’ˆì§ˆ ì„ íƒ(ìƒ˜í”Œ)</p>

			<div class="player" id="player">
				<div class="video-wrap">
					<div class="sub-overlay" id="subOverlay" aria-hidden="false"></div>
								<video id="video" preload="metadata" poster="https://picsum.photos/1280/720?blur=3">
									<!-- ì—¬ëŸ¬ í’ˆì§ˆ ì†ŒìŠ¤(ìƒ˜í”Œ) -->
									<source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4" data-quality="720p">
									<source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4" data-quality="480p">
									<!-- ìë§‰ ì˜ˆì‹œ: subs_ko.vtt ë¡œì»¬ íŒŒì¼ -->
									<track id="track-ko" label="í•œêµ­ì–´" kind="subtitles" srclang="ko" src="subs_ko.vtt" default>
								</video>
								<p id="noSubNotice" style="position:absolute;left:12px;bottom:12px;color:#fff;font-size:13px;display:none">ìë§‰ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
							
				</div>

						<div class="controls" role="toolbar" aria-label="ë¹„ë””ì˜¤ ì¬ìƒ ì»¨íŠ¸ë¡¤">
							<button class="btn" id="playBtn" title="ì¬ìƒ/ì¼ì‹œì •ì§€" aria-label="ì¬ìƒ" aria-pressed="false" aria-describedby="playDesc">
								<!-- SVG icons: play and pause (we toggle visibility) -->
								<svg id="playIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
									<path d="M5 3v18l15-9L5 3z" fill="#061021" />
								</svg>
								<svg id="pauseIcon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="display:none">
									<path d="M6 4h4v16H6zM14 4h4v16h-4z" fill="#061021" />
								</svg>
							</button>

							<div id="playDesc" class="sr-only">ë²„íŠ¼: ì¬ìƒ ë˜ëŠ” ì¼ì‹œì •ì§€. ìŠ¤í˜ì´ìŠ¤í‚¤ë¡œë„ í† ê¸€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>

							<div class="progress" id="progress" title="íƒìƒ‰ë°”" role="slider" tabindex="0"
									 aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-valuetext="0ì´ˆ" aria-label="ì¬ìƒ ìœ„ì¹˜">
								<i id="progressBar"></i>
							</div>

								<div class="time" id="time" aria-live="polite">00:00 / 00:00</div>
								<div id="progressDesc" class="sr-only">ì¬ìƒ ìœ„ì¹˜ ìŠ¬ë¼ì´ë”ì…ë‹ˆë‹¤. í™”ì‚´í‘œ í‚¤ë¡œ ì´ë™í•˜ê±°ë‚˜ í´ë¦­ìœ¼ë¡œ íƒìƒ‰í•˜ì„¸ìš”.</div>

							<div class="right">
								<label for="volume" class="sr-only">ë³¼ë¥¨</label>
                                <input id="volume" type="range" min="0" max="1" step="0.05" value="1" title="ë³¼ë¥¨" aria-describedby="volumeDesc">

							<button class="btn" id="muteBtn" title="ìŒì†Œê±°" aria-label="ìŒì†Œê±°" aria-pressed="false" aria-describedby="muteDesc">ğŸ”Š</button>

							<div id="volumeDesc" class="sr-only">ë³¼ë¥¨ ì¡°ì ˆ ìŠ¬ë¼ì´ë”ì…ë‹ˆë‹¤. ìœ„/ì•„ë˜ í™”ì‚´í‘œë¡œ ì¡°ì ˆ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
							<div id="muteDesc" class="sr-only">ìŒì†Œê±° í† ê¸€ ë²„íŠ¼ì…ë‹ˆë‹¤. í˜„ì¬ ìŒì†Œê±° ìƒíƒœëŠ” aria-pressedë¡œ í‘œì‹œë©ë‹ˆë‹¤.</div>

											<label for="quality" class="sr-only">í™”ì§ˆ</label>
											<!-- Custom quality dropdown to ensure consistent styling -->
											<div class="custom-select" id="qualitySelect" tabindex="0" role="listbox" aria-label="í™”ì§ˆ ì„ íƒ" aria-expanded="false" aria-describedby="qualityDesc">
												<div class="custom-select__trigger" id="qualityTrigger">Auto <span class="caret">â–¾</span></div>
												<ul class="custom-select__options" id="qualityOptions" role="listbox" tabindex="-1">
													<li id="qualityOpt-auto" role="option" data-value="auto" aria-selected="true" tabindex="-1">Auto</li>
													<li id="qualityOpt-720p" role="option" data-value="720p" aria-selected="false" tabindex="-1">720p</li>
													<li id="qualityOpt-480p" role="option" data-value="480p" aria-selected="false" tabindex="-1">480p</li>
												</ul>
											</div>
											<div id="qualityDesc" class="sr-only">ë™ì˜ìƒ í™”ì§ˆ ì„ íƒ. AutoëŠ” ë¸Œë¼ìš°ì € ê¸°ë³¸ ë˜ëŠ” í˜„ì¬ ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</div>

											<label for="subs" class="sr-only">ìë§‰ ì„ íƒ</label>
											<select id="subs" title="ìë§‰ ì„ íƒ" aria-label="ìë§‰ ì„ íƒ" aria-describedby="subsDesc">
												<option value="off">ìë§‰ ë”</option>
												<option value="ko">í•œêµ­ì–´</option>
												<option value="en">English</option>
											</select>
									<div id="subsDesc" class="sr-only">ìë§‰ ì–¸ì–´ ì„ íƒ. íŠ¸ë™ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.</div>

														<button class="btn" id="ccBtn" title="ìë§‰ ì „í™˜" aria-label="ìë§‰ ì „í™˜" aria-pressed="false" aria-describedby="ccDesc">CC</button>
														<button class="btn" id="hlsBtn" title="HLS ì¼œê¸°/ë„ê¸°" aria-label="HLS" aria-pressed="false" aria-describedby="hlsDesc">HLS</button>
														<button class="btn" id="fsBtn" title="ì „ì²´í™”ë©´" aria-label="ì „ì²´í™”ë©´" aria-describedby="fsDesc">â¤¢</button>
														<button class="settings-btn" id="settingsBtn" title="ìë§‰ ì„¤ì •" aria-label="ìë§‰ ì„¤ì •" aria-describedby="settingsDesc">âš™</button>
														<div id="fsDesc" class="sr-only">ì „ì²´í™”ë©´ ëª¨ë“œë¡œ ì „í™˜í•©ë‹ˆë‹¤.</div>
														<div id="settingsDesc" class="sr-only">ìë§‰ ë° í”„ë¦¬ì…‹ ì„¤ì •ì„ ì—½ë‹ˆë‹¤.</div>
																	<div id="settingsPanel" class="settings-panel" style="display:none" aria-hidden="true">
																		<label>í”„ë¦¬ì…‹ ì´ë¦„
																			<input id="presetName" type="text" placeholder="preset ì´ë¦„">
																			<button id="savePresetBtn" class="btn" type="button">ì €ì¥</button>
																		</label>
																		<label>í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°
																			<select id="presetSelect"><option value="">(ì—†ìŒ)</option></select>
																			<button id="loadPresetBtn" class="btn" type="button">ë¶ˆëŸ¬ì˜¤ê¸°</button>
																			<button id="deletePresetBtn" class="btn" type="button">ì‚­ì œ</button>
																			<button id="exportPresetBtn" class="btn" type="button">ë‚´ë³´ë‚´ê¸°</button>
																			<button id="importPresetBtn" class="btn" type="button">ê°€ì ¸ì˜¤ê¸°</button>
																			<input id="importFile" type="file" accept="application/json" style="display:none">
																		</label>
																		<div id="ccDesc" class="sr-only">ìë§‰ì„ ì¼œê³  ë•ë‹ˆë‹¤. íŠ¸ë™ì´ ì—†ìœ¼ë©´ ì•ˆë‚´ë©ë‹ˆë‹¤.</div>
																		<div id="hlsDesc" class="sr-only">HLS ìŠ¤íŠ¸ë¦¬ë° í”Œë ˆì´ë°±ì„ í† ê¸€í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì— ë”°ë¼ ë™ì‘í•©ë‹ˆë‹¤.</div>
																		<label style="margin-top:6px;display:block">
																			<button id="exportAllBtn" class="btn" type="button">ëª¨ë‘ ë‚´ë³´ë‚´ê¸°</button>
																			<button id="importAllBtn" class="btn" type="button">ëª¨ë‘ ê°€ì ¸ì˜¤ê¸°(ë³‘í•©)</button>
																			<button id="replaceAllBtn" class="btn" type="button">ëª¨ë‘ ê°€ì ¸ì˜¤ê¸°(ëŒ€ì²´)</button>
																			<button id="resetBtn" class="btn" type="button">ì´ˆê¸°í™”(ê¸°ë³¸ê°’)</button>
																		</label>
																		<label style="margin-top:6px;display:block">
																			<input id="autoRollbackChk" type="checkbox"> ë¯¸ë¦¬ë³´ê¸° ìë™ ë¡¤ë°±(5ì´ˆ)
																			<span id="rollbackTimer" style="margin-left:8px;color:var(--muted)"></span>
																		</label>
																		<label style="margin-top:6px;display:block">
																			ë¯¸ë¦¬ë³´ê¸° ì§€ì†ì‹œê°„: <span id="previewDurLabel">10s</span>
																			<input id="previewDuration" type="range" min="1" max="60" step="1" value="10" style="vertical-align:middle;margin-left:8px" title="í”„ë¦¬ì…‹ ë¯¸ë¦¬ë³´ê¸° ìœ ì§€ ì‹œê°„(ì´ˆ)">
																			<button id="previewInfoBtn" class="btn" type="button" aria-expanded="false" aria-controls="previewInfo" title="ë¯¸ë¦¬ë³´ê¸° ì„¤ëª…">â„¹</button>
																			<div id="previewInfo" role="note" style="display:none;color:var(--muted);font-size:12px;margin-top:6px;">í”„ë¦¬ì…‹ ë“œë¡­ë‹¤ìš´ì—ì„œ ì„ íƒí•˜ë©´ ì´ ì‹œê°„ ë™ì•ˆ ìŠ¤íƒ€ì¼ì´ ì„ì‹œ ì ìš©ë©ë‹ˆë‹¤. ìë™ ë¡¤ë°±ì„ ì›í•˜ë©´ "ë¯¸ë¦¬ë³´ê¸° ìë™ ë¡¤ë°±"ì„ ì¼œì„¸ìš”.</div>
																		</label>
																		<hr style="margin:8px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">
																		<label>ì• ë‹ˆë©”ì´ì…˜ ì†ë„(ì „ì²´ ìŠ¤ì¼€ì¼): <span id="speedLabel">100%</span></label>
																		<input id="speedRange" type="range" min="30" max="200" step="10" value="100">
																		<label>ì¸ ì§€ì†ì‹œê°„: <span id="inLabel">220ms</span></label>
																		<input id="inRange" type="range" min="80" max="1000" step="10" value="220">
																		<label>ì•„ì›ƒ ì§€ì†ì‹œê°„: <span id="outLabel">240ms</span></label>
																		<input id="outRange" type="range" min="80" max="1000" step="10" value="240">
																		<label>ì´ì§•
																			<select id="easingSelect">
																				<option value="cubic-bezier(.2,.9,.2,1)">ë¶€ë“œëŸ½ê²Œ</option>
																				<option value="ease">ease</option>
																				<option value="ease-in">ease-in</option>
																				<option value="ease-out">ease-out</option>
																				<option value="linear">linear</option>
																			</select>
																		</label>
																		<label>í°íŠ¸ ê°€ì¡±
																			<select id="fontFamilySelect">
																				<option value="system-ui,Segoe UI,Roboto,'Noto Sans KR',sans-serif">ì‹œìŠ¤í…œ ê¸°ë³¸</option>
																				<option value="Arial,Helvetica,sans-serif">Arial</option>
																				<option value="'Noto Sans KR',sans-serif">Noto Sans KR</option>
																				<option value="'Courier New',monospace">Monospace</option>
																			</select>
																		</label>
																		<label>ê¸€ì í¬ê¸°: <span id="fontSizeLabel">20px</span></label>
																		<input id="fontSizeRange" type="range" min="12" max="36" step="1" value="20">
																		<label>ê¸€ì ìƒ‰ìƒ: <input id="fontColor" type="color" value="#ffffff"></label>
																		<label>ë°°ê²½ íˆ¬ëª…ë„: <span id="bgLabel">60%</span></label>
																		<input id="bgRange" type="range" min="0" max="100" step="5" value="60">
																		<label>í•˜ë‹¨ ì—¬ë°±: <span id="bottomLabel">6%</span></label>
																		<input id="bottomRange" type="range" min="0" max="20" step="1" value="6">
																		<label>ìë§‰ ìœ„ì¹˜
																			<select id="positionSelect">
																				<option value="center">ê°€ìš´ë°</option>
																				<option value="left">ì™¼ìª½</option>
																				<option value="right">ì˜¤ë¥¸ìª½</option>
																			</select>
																		</label>
																		<div style="margin-top:8px;border-top:1px dashed rgba(255,255,255,0.03);padding-top:8px">
																			<strong>í”„ë¦¬ì…‹ ë¯¸ë¦¬ë³´ê¸°</strong>
																			<div id="presetPreview" style="margin-top:6px"></div>
																		</div>
																		<!-- Keyboard help panel -->
																		<div id="kbdHelp" style="margin-top:8px;border-top:1px dashed rgba(255,255,255,0.03);padding-top:8px;display:none" role="region" aria-label="í‚¤ë³´ë“œ ë„ì›€ë§">
																			<strong>í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤</strong>
																			<ul style="margin:6px 0 0 18px;color:var(--muted)">
																				<li><kbd>Space</kbd> ì¬ìƒ/ì¼ì‹œì •ì§€</li>
																				<li><kbd>â† / â†’</kbd> 5ì´ˆ ì´ë™</li>
																				<li><kbd>â†‘ / â†“</kbd> ë³¼ë¥¨ ì¡°ì ˆ (ë³¼ë¥¨ ìŠ¬ë¼ì´ë” í¬ì»¤ìŠ¤ ì‹œ)</li>
																				<li><kbd>F</kbd> ì „ì²´í™”ë©´ í† ê¸€</li>
																				<li><kbd>?</kbd> ì´ ë„ì›€ë§ í† ê¸€</li>
																			</ul>
																			<button id="closeKbdHelp" class="btn" type="button" style="margin-top:6px">ë‹«ê¸°</button>
																		</div>
																	</div>
							</div>
						</div>
			</div>
			<hr />
			<p>ìƒ˜í”Œ ì˜ìƒì€ MDNì˜ ê³µê°œ ì˜ˆì œì…ë‹ˆë‹¤. ë¡œì»¬ ì˜ìƒì´ë‚˜ ë‹¤ë¥¸ URLì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ &lt;source&gt; ìš”ì†Œì˜ srcë¥¼ ë°”ê¿”ì£¼ì„¸ìš”.</p>
		</div>

		<!-- hls.js (CDN) -->
		<script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js"></script>
		<script>
			// ê°„ë‹¨í•œ í”Œë ˆì´ì–´ ìŠ¤í¬ë¦½íŠ¸
			const video = document.getElementById('video');
			const playBtn = document.getElementById('playBtn');
			const progress = document.getElementById('progress');
			const progressBar = document.getElementById('progressBar');
			const timeEl = document.getElementById('time');
			const volume = document.getElementById('volume');
			const muteBtn = document.getElementById('muteBtn');
			const fsBtn = document.getElementById('fsBtn');
			const ccBtn = document.getElementById('ccBtn');
			const quality = document.getElementById('quality');
			const hlsBtn = document.getElementById('hlsBtn');
			const subs = document.getElementById('subs');
			let hls; // hls.js ì¸ìŠ¤í„´ìŠ¤
			// ìƒ˜í”Œ HLS ìŠ¤íŠ¸ë¦¼ (CORS í—ˆìš©ë˜ëŠ” ê³µê°œ ìŠ¤íŠ¸ë¦¼ ì‚¬ìš©)
			const sampleHls = 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8';

			function formatTime(s){
				if (!isFinite(s)) return '00:00';
				const m = Math.floor(s/60).toString().padStart(2,'0');
				const sec = Math.floor(s%60).toString().padStart(2,'0');
				return `${m}:${sec}`;
			}

			// ì¬ìƒ/ì¼ì‹œì •ì§€ - SVG ì•„ì´ì½˜ í† ê¸€ ë° aria ìƒíƒœ ì—…ë°ì´íŠ¸
			function syncPlayIcon(){
				const playIcon = document.getElementById('playIcon');
				const pauseIcon = document.getElementById('pauseIcon');
				if(video.paused){ playIcon.style.display = 'block'; pauseIcon.style.display = 'none'; playBtn.setAttribute('aria-pressed','false'); playBtn.setAttribute('aria-label','ì¬ìƒ'); }
				else { playIcon.style.display = 'none'; pauseIcon.style.display = 'block'; playBtn.setAttribute('aria-pressed','true'); playBtn.setAttribute('aria-label','ì¼ì‹œì •ì§€'); }
			}
			playBtn.addEventListener('click',()=>{ if(video.paused) video.play(); else video.pause(); syncPlayIcon(); });
			// ë¹„ë””ì˜¤ì˜ play/pause ì´ë²¤íŠ¸ì— ë”°ë¼ ì•„ì´ì½˜ ë™ê¸°í™”
			video.addEventListener('play', syncPlayIcon);
			video.addEventListener('pause', syncPlayIcon);

			// ì‹œê°„ ì—…ë°ì´íŠ¸
			video.addEventListener('timeupdate',()=>{
				const pct = (video.currentTime / video.duration) * 100 || 0;
				progressBar.style.width = pct + '%';
				timeEl.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`;
			});

					// í”„ë¡œê·¸ë ˆìŠ¤ í´ë¦­ìœ¼ë¡œ íƒìƒ‰ ë° í‚¤ë³´ë“œ ì œì–´ (slider ì—­í• )
					function seekByClientX(x){
						const rect = progress.getBoundingClientRect();
						const pct = Math.max(0, Math.min(1, (x - rect.left) / rect.width));
						video.currentTime = pct * video.duration;
					}
					progress.addEventListener('click',(e)=>{ seekByClientX(e.clientX); });
					progress.addEventListener('keydown',(e)=>{
						if(!isFinite(video.duration)) return;
						const step = Math.max(1, Math.floor(video.duration / 20)); // ëŒ€ëµì  ìŠ¤í…
						let handled = false;
						if(e.key === 'ArrowLeft'){ video.currentTime = Math.max(0, video.currentTime - step); handled = true; }
						if(e.key === 'ArrowRight'){ video.currentTime = Math.min(video.duration, video.currentTime + step); handled = true; }
						if(e.key === 'Home'){ video.currentTime = 0; handled = true; }
						if(e.key === 'End'){ video.currentTime = video.duration; handled = true; }
						if(e.key === 'PageUp'){ video.currentTime = Math.min(video.duration, video.currentTime + 10); handled = true; }
						if(e.key === 'PageDown'){ video.currentTime = Math.max(0, video.currentTime - 10); handled = true; }
						if(handled){ e.preventDefault(); updateProgressAria(); }
					});

			// ë³¼ë¥¨
			volume.addEventListener('input',()=>{ video.volume = parseFloat(volume.value); muteBtn.textContent = video.volume>0?'ğŸ”Š':'ğŸ”ˆ'; });
			muteBtn.addEventListener('click',()=>{ video.muted = !video.muted; muteBtn.textContent = video.muted ? 'ğŸ”ˆ' : 'ğŸ”Š'; });

			// ì „ì²´í™”ë©´
			fsBtn.addEventListener('click',()=>{
				if(!document.fullscreenElement) video.closest('.player').requestFullscreen().catch(()=>{});
				else document.exitFullscreen().catch(()=>{});
			});

			// ìë§‰ í† ê¸€ (íŠ¸ë™ì´ ìˆì„ ë•Œë§Œ)
					ccBtn.addEventListener('click', ()=>{
						const tr = video.querySelector('track');
						if(!tr || !tr.src) { announce('ìë§‰ íŠ¸ë™ì´ ì—†ìŠµë‹ˆë‹¤. íŠ¸ë™ì˜ srcë¥¼ ì§€ì •í•˜ì„¸ìš”.'); return; }
						const showing = tr.mode === 'showing';
						tr.mode = showing ? 'hidden' : 'showing';
						ccBtn.setAttribute('aria-pressed', String(!showing));
						ccBtn.style.opacity = (!showing) ? '1' : '0.6';
						announce(!showing ? 'ìë§‰ ì¼œì§' : 'ìë§‰ êº¼ì§');
					});

					// --- Custom quality dropdown behavior ---
					const qualitySelect = document.getElementById('qualitySelect');
					const qualityTrigger = document.getElementById('qualityTrigger');
					const qualityOptions = document.getElementById('qualityOptions');
					let qFocusedIndex = 0;

					// live region for announcements
					let liveAnn = document.getElementById('liveAnn');
					if(!liveAnn){ liveAnn = document.createElement('div'); liveAnn.id='liveAnn'; liveAnn.setAttribute('aria-live','polite'); liveAnn.className='sr-only'; document.body.appendChild(liveAnn); }

					function openQuality(){ qualityOptions.classList.add('open'); qualitySelect.setAttribute('aria-expanded','true'); qFocusedIndex = 0; const first = qualityOptions.children[qFocusedIndex]; if(first){ first.focus(); qualitySelect.setAttribute('aria-activedescendant', first.id); } }
					function closeQuality(){ qualityOptions.classList.remove('open'); qualitySelect.setAttribute('aria-expanded','false'); qualitySelect.removeAttribute('aria-activedescendant'); try{ qualitySelect.focus(); }catch(e){} }

					qualityTrigger.addEventListener('click', ()=>{ const open = qualityOptions.classList.contains('open'); if(open) closeQuality(); else openQuality(); });

					// option click
					Array.from(qualityOptions.children).forEach((li, idx)=>{
						li.tabIndex = -1;
						li.addEventListener('click', ()=>{
							selectQuality(li.dataset.value, li.textContent);
							closeQuality();
						});
						li.addEventListener('keydown', (e)=>{
							if(e.key === 'ArrowDown'){ e.preventDefault(); const next = (idx+1) % qualityOptions.children.length; qualityOptions.children[next].focus(); }
							if(e.key === 'ArrowUp'){ e.preventDefault(); const prev = (idx-1+qualityOptions.children.length) % qualityOptions.children.length; qualityOptions.children[prev].focus(); }
							if(e.key === 'Enter'){ selectQuality(li.dataset.value, li.textContent); closeQuality(); }
							if(e.key === 'Escape'){ closeQuality(); }
						});
						li.addEventListener('focus', ()=>{ qualitySelect.setAttribute('aria-activedescendant', li.id); qFocusedIndex = idx; });
					});

					function selectQuality(value, label){
						qualityTrigger.textContent = label + ' ';
						const caret = document.createElement('span'); caret.className='caret'; caret.textContent = 'â–¾'; qualityTrigger.appendChild(caret);
						// update aria-selected on options
						Array.from(qualityOptions.children).forEach(li=> li.setAttribute('aria-selected', String(li.dataset.value === value)));
						// announce selection
						liveAnn.textContent = label + ' ì„ íƒë¨';
						// sync with original handler logic
						if(value === 'auto'){ announce('AutoëŠ” ê¸°ë³¸ ì†ŒìŠ¤ ì‚¬ìš©'); return; }
						const sources = Array.from(video.querySelectorAll('source'));
						const sel = sources.find(s => s.dataset.quality === value);
						if(sel){ const curTime = video.currentTime; const paused = video.paused; video.src = sel.src; video.load(); video.currentTime = curTime; if(!paused) video.play(); announce(value + ' ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤'); }
					}

					// close dropdown on outside click
					document.addEventListener('click', (e)=>{ if(!qualitySelect.contains(e.target)) closeQuality(); });

							// ìë§‰ ì„ íƒ(select) ì²˜ë¦¬: off/ko/en
							subs.addEventListener('change', ()=>{
								const v = subs.value;
								// helper: ensure track exists
								function ensureTrack(lang, src){
									let t = video.querySelector(`track[srclang="${lang}"]`);
									if(!t){ t = document.createElement('track'); t.kind='subtitles'; t.label = (lang==='ko')? 'í•œêµ­ì–´' : 'English'; t.srclang = lang; t.src = src; video.appendChild(t); }
									return t;
								}
								// turn off
								if(v === 'off'){
									Array.from(video.querySelectorAll('track')).forEach(t=> t.mode='hidden');
									announce('ìë§‰ ë”');
									return;
								}
								if(v === 'ko'){
									const t = ensureTrack('ko','subs_ko.vtt'); Array.from(video.querySelectorAll('track')).forEach(tr=>{ if(tr !== t) tr.mode='hidden'; }); t.mode='showing'; announce('í•œêµ­ì–´ ìë§‰ ì„ íƒë¨');
									return;
								}
								if(v === 'en'){
									const t = ensureTrack('en','subs_en.vtt'); Array.from(video.querySelectorAll('track')).forEach(tr=>{ if(tr !== t) tr.mode='hidden'; }); t.mode='showing'; announce('English subtitles selected');
									return;
								}
							});

					// í™”ì§ˆ ì„ íƒ(ë‹¨ìˆœ: ê°™ì€ íŒŒì¼ë¡œ êµì²´í•˜ëŠ” ìƒ˜í”Œ ë¡œì§)
					// ë„¤ì´í‹°ë¸Œ select (#quality)ê°€ ì¡´ì¬í•  ë•Œë§Œ ì´ë²¤íŠ¸ ë°”ì¸ë”©
					if(quality){
						quality.addEventListener('change', ()=>{
							const q = quality.value;
							// ì‹¤ì œ ìŠ¤íŠ¸ë¦¬ë° ì „í™˜ì´ í•„ìš”í•˜ë©´ HLS/DASH ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
							if(q === 'auto'){ alert('AutoëŠ” ê¸°ë³¸ ì†ŒìŠ¤ ì‚¬ìš©'); return; }
							// ìƒ˜í”Œ: ë™ì¼ srcë¥¼ ì¬ì„¤ì • (ë°ëª¨ ëª©ì )
							const sources = Array.from(video.querySelectorAll('source'));
							const sel = sources.find(s => s.dataset.quality === q);
							if(sel){ const curTime = video.currentTime; const paused = video.paused; video.src = sel.src; video.load(); video.currentTime = curTime; if(!paused) video.play(); announce(q + ' ë¡œ ì „í™˜ë˜ì—ˆìŠµë‹ˆë‹¤'); }
							else announce('ì„ íƒí•œ í’ˆì§ˆ ì†ŒìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.');
						});
					}

							// HLS í† ê¸€: HLS ì¬ìƒ ì‹œ hls.js ì‚¬ìš©, ë„ë©´ ê¸°ë³¸ <source>ë¡œ ë³µì›
							hlsBtn.addEventListener('click', ()=>{
								const enabled = hlsBtn.getAttribute('aria-pressed') === 'true';
								if(enabled){
									// HLS ë„ê¸°: ê¸°ì¡´ ì†ŒìŠ¤ê°€ ìˆë‹¤ë©´ ë³µì›
									if(hls){ hls.destroy(); hls = null; }
									video.removeAttribute('src');
									// ì¬ì„¤ì •: ì²« ë²ˆì§¸ source ì‚¬ìš©
									const first = video.querySelector('source');
									if(first){ video.src = first.src; video.load(); }
									hlsBtn.setAttribute('aria-pressed','false');
									announce('HLS ë”');
								} else {
									// HLS ì¼œê¸°
									if(Hls.isSupported()){
										if(hls) hls.destroy();
										hls = new Hls();
										hls.loadSource(sampleHls);
										hls.attachMedia(video);
										hls.on(Hls.Events.MANIFEST_PARSED, function(){ video.play(); });
										hlsBtn.setAttribute('aria-pressed','true');
										announce('HLS ì¼¬');
									} else if(video.canPlayType('application/vnd.apple.mpegurl')){
										video.src = sampleHls;
										video.addEventListener('loadedmetadata', ()=>{ video.play(); }, { once:true });
										hlsBtn.setAttribute('aria-pressed','true');
										announce('HLS ì¼¬');
									} else {
										announce('ì´ í™˜ê²½ì—ì„œ HLSë¥¼ ì¬ìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
									}
								}
							});

					// í‚¤ë³´ë“œ: ìŠ¤í˜ì´ìŠ¤ ì¬ìƒ/ì¼ì‹œì •ì§€, ì¢Œìš° 5ì´ˆ íƒìƒ‰ (ì»¨íŠ¸ë¡¤ í¬ì»¤ìŠ¤ê°€ ì•„ë‹ ë•Œ)
					document.addEventListener('keydown',(e)=>{
						const active = document.activeElement;
						const controlsContain = document.getElementById('player').contains(active);
						if(e.code === 'Space' && !controlsContain){ e.preventDefault(); playBtn.click(); }
						if(!controlsContain){
							if(e.code === 'ArrowLeft'){ video.currentTime = Math.max(0, video.currentTime - 5); }
							if(e.code === 'ArrowRight'){ video.currentTime = Math.min(video.duration, video.currentTime + 5); }
						}
					});

					// ìŠ¤í¬ë¦°ë¦¬ë”ìš© ê°„ë‹¨í•œ announce í•¨ìˆ˜
					const live = document.createElement('div');
					live.setAttribute('aria-live','polite');
					live.setAttribute('aria-atomic','true');
					live.style.position = 'absolute'; live.style.left = '-9999px';
					document.body.appendChild(live);
					function announce(text){ live.textContent = text; }

					function updateProgressAria(){
						const pct = Math.floor((video.currentTime / video.duration) * 100) || 0;
						progress.setAttribute('aria-valuenow', String(pct));
						progress.setAttribute('aria-valuetext', `${formatTime(video.currentTime)} ê²½ê³¼`);
					}

							// --- Custom subtitle overlay renderer ---
							const subOverlay = document.getElementById('subOverlay');
									const vttCache = {}; // src -> cues
									const settingsBtn = document.getElementById('settingsBtn');
									const settingsPanel = document.getElementById('settingsPanel');
									const speedRange = document.getElementById('speedRange');
									const speedLabel = document.getElementById('speedLabel');
									const crossfadeChk = document.getElementById('crossfadeChk');
									const stackChk = document.getElementById('stackChk');
									const fontFamilySelect = document.getElementById('fontFamilySelect');
									const fontSizeRange = document.getElementById('fontSizeRange');
									const fontSizeLabel = document.getElementById('fontSizeLabel');
									const fontColor = document.getElementById('fontColor');
									const bgRange = document.getElementById('bgRange');
									const bgLabel = document.getElementById('bgLabel');
									const bottomRange = document.getElementById('bottomRange');
									const bottomLabel = document.getElementById('bottomLabel');
									const presetName = document.getElementById('presetName');
									const savePresetBtn = document.getElementById('savePresetBtn');
									const presetSelect = document.getElementById('presetSelect');
									const loadPresetBtn = document.getElementById('loadPresetBtn');
									const deletePresetBtn = document.getElementById('deletePresetBtn');
									const inRange = document.getElementById('inRange');
									const outRange = document.getElementById('outRange');
									const inLabel = document.getElementById('inLabel');
									const outLabel = document.getElementById('outLabel');
									const easingSelect = document.getElementById('easingSelect');
									const positionSelect = document.getElementById('positionSelect');

									let maxStack = 3;

									settingsBtn.addEventListener('click', ()=>{
										const open = settingsPanel.style.display !== 'none';
										settingsPanel.style.display = open ? 'none' : 'block';
										settingsPanel.setAttribute('aria-hidden', String(open));
									});

									speedRange.addEventListener('input', ()=>{
										const v = Number(speedRange.value);
										speedLabel.textContent = v + '%';
										// CSS ë³€ìˆ˜ì— ë°˜ì˜
										const inMs = Math.round(220 * (100 / v));
										const outMs = Math.round(240 * (100 / v));
										document.documentElement.style.setProperty('--sub-in-duration', inMs + 'ms');
										document.documentElement.style.setProperty('--sub-out-duration', outMs + 'ms');
									});

									// in/out ì§ì ‘ ì œì–´
									inRange.addEventListener('input', ()=>{
										const v = Number(inRange.value); inLabel.textContent = v + 'ms';
										document.documentElement.style.setProperty('--sub-in-duration', v + 'ms');
									});
									outRange.addEventListener('input', ()=>{
										const v = Number(outRange.value); outLabel.textContent = v + 'ms';
										document.documentElement.style.setProperty('--sub-out-duration', v + 'ms');
									});

									// easing ì„ íƒ
									easingSelect.addEventListener('change', ()=>{
										document.documentElement.style.setProperty('--sub-easing', easingSelect.value);
									});

									// position
									positionSelect.addEventListener('change', ()=>{
										const v = positionSelect.value;
										if(v === 'left') { subOverlay.style.alignItems = 'flex-start'; subOverlay.style.paddingLeft = '6%'; subOverlay.style.paddingRight = '6%'; }
										else if(v === 'right'){ subOverlay.style.alignItems = 'flex-end'; subOverlay.style.paddingLeft = '6%'; subOverlay.style.paddingRight = '6%'; }
										else { subOverlay.style.alignItems = 'center'; subOverlay.style.paddingLeft = '6%'; subOverlay.style.paddingRight = '6%'; }
									});

									// Preset management
									function loadPresets(){ try{ return JSON.parse(localStorage.getItem('subPresets')||'{}'); }catch(e){ return {}; } }
									function savePresets(p){ localStorage.setItem('subPresets', JSON.stringify(p)); }
									function refreshPresetList(){ const p = loadPresets(); presetSelect.innerHTML = '<option value="">(ì—†ìŒ)</option>'; Object.keys(p).forEach(k=>{ const opt = document.createElement('option'); opt.value = k; opt.textContent = k; presetSelect.appendChild(opt); }); }

									savePresetBtn.addEventListener('click', ()=>{
										const name = (presetName.value || '').trim(); if(!name) { alert('í”„ë¦¬ì…‹ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”'); return; }
										const s = loadStyleSettings() || {};
										const presets = loadPresets(); presets[name] = s; savePresets(presets); refreshPresetList(); announce('í”„ë¦¬ì…‹ ì €ì¥ë¨');
									});

									loadPresetBtn.addEventListener('click', ()=>{
										const sel = presetSelect.value; if(!sel) return; const presets = loadPresets(); const s = presets[sel]; if(s){ applyStyleSettings(s); saveStyleSettings(s); // update UI
											fontFamilySelect.value = s.fontFamily; fontSizeRange.value = s.fontSize; fontSizeLabel.textContent = s.fontSize + 'px'; fontColor.value = s.color; bgRange.value = s.bgOpacity; bgLabel.textContent = s.bgOpacity + '%'; bottomRange.value = s.bottom; bottomLabel.textContent = s.bottom + '%'; announce('í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜´'); }
									});

									deletePresetBtn.addEventListener('click', ()=>{
										const sel = presetSelect.value; if(!sel) return; const presets = loadPresets(); delete presets[sel]; savePresets(presets); refreshPresetList(); announce('í”„ë¦¬ì…‹ ì‚­ì œë¨');
									});

									refreshPresetList();

									// export/import and preview
									const exportPresetBtn = document.getElementById('exportPresetBtn');
									const importPresetBtn = document.getElementById('importPresetBtn');
									const importFile = document.getElementById('importFile');
									const presetPreview = document.getElementById('presetPreview');

									exportPresetBtn.addEventListener('click', ()=>{
										const sel = presetSelect.value; if(!sel) { alert('ë‚´ë³´ë‚¼ í”„ë¦¬ì…‹ì„ ì„ íƒí•˜ì„¸ìš”'); return; }
										const presets = loadPresets(); const data = presets[sel]; if(!data) return; const blob = new Blob([JSON.stringify({ name: sel, data }, null, 2)], { type: 'application/json' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = sel + '.json'; a.click(); URL.revokeObjectURL(url); announce('í”„ë¦¬ì…‹ ë‚´ë³´ë‚´ê¸° ì‹œì‘');
									});

									importPresetBtn.addEventListener('click', ()=>{ importFile.click(); });
									importFile.addEventListener('change', (e)=>{
										const f = e.target.files && e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = () => { try{ const obj = JSON.parse(reader.result); if(obj.name && obj.data){ const presets = loadPresets(); presets[obj.name] = obj.data; savePresets(presets); refreshPresetList(); announce('í”„ë¦¬ì…‹ ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ'); } else { // maybe multiple
											const parsed = Array.isArray(JSON.parse(reader.result)) ? JSON.parse(reader.result) : JSON.parse(reader.result);
											if(typeof parsed === 'object'){ const presets = loadPresets(); Object.keys(parsed).forEach(k=> presets[k] = parsed[k]); savePresets(presets); refreshPresetList(); announce('í”„ë¦¬ì…‹ ë³‘í•© ì™„ë£Œ'); }
										} }catch(err){ alert('íŒŒì¼ íŒŒì‹± ì‹¤íŒ¨: ' + err.message); } }; reader.readAsText(f); });

									// preview: select ë³€ê²½ ì‹œ ì €ì¥ ì—†ì´ ì ìš© (ë¯¸ë¦¬ë³´ê¸°)
									presetSelect.addEventListener('change', ()=>{
										const sel = presetSelect.value; presetPreview.innerHTML = '';
										if(!sel) return;
										const presets = loadPresets(); const s = presets[sel];
										if(!s) return;
										// apply temporarily
										applyStyleSettings(s);
										// ìë™ ë¡¤ë°± ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘(ì‚¬ìš©ì ì„¤ì • ê°’)
										const dur = Number(document.getElementById('previewDuration').value) || 5;
										startPreviewCountdown(dur);
										// show small preview box
										const box = document.createElement('div'); box.style.background = 'rgba(0,0,0,0.6)'; box.style.color = s.color || '#fff'; box.style.padding = '6px 8px'; box.style.borderRadius = '6px'; box.style.fontSize = (s.fontSize || 20) + 'px'; box.textContent = sel + ' í”„ë¦¬ì…‹ ë¯¸ë¦¬ë³´ê¸°'; presetPreview.appendChild(box);
										announce('í”„ë¦¬ì…‹ ë¯¸ë¦¬ë³´ê¸°: ' + sel);
									});

									// --- ì „ì²´ í”„ë¦¬ì…‹ ë‚´ë³´ë‚´ê¸°/ê°€ì ¸ì˜¤ê¸°/ì´ˆê¸°í™” ë° ë¯¸ë¦¬ë³´ê¸° ìë™ ë¡¤ë°± ---
									const exportAllBtn = document.getElementById('exportAllBtn');
									const importAllBtn = document.getElementById('importAllBtn');
									const replaceAllBtn = document.getElementById('replaceAllBtn');
									const resetBtn = document.getElementById('resetBtn');
									const autoRollbackChk = document.getElementById('autoRollbackChk');
									const rollbackTimer = document.getElementById('rollbackTimer');

									exportAllBtn.addEventListener('click', ()=>{
										const all = loadPresets();
										const blob = new Blob([JSON.stringify(all, null, 2)], {type:'application/json'});
										const url = URL.createObjectURL(blob);
										const a = document.createElement('a'); a.href = url; a.download = 'subpresets_all.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
										announce('ëª¨ë“  í”„ë¦¬ì…‹ ë‚´ë³´ë‚´ê¸°');
									});

									// ë³‘í•© ê°€ì ¸ì˜¤ê¸°
									importAllBtn.addEventListener('click', ()=>{
										importFile.onchange = async (e)=>{
											const f = e.target.files[0]; if(!f) return;
											try{
												const txt = await f.text(); const parsed = JSON.parse(txt);
												if(typeof parsed !== 'object') throw new Error('ì˜ëª»ëœ í˜•ì‹');
												const existing = loadPresets(); for(const k in parsed) existing[k] = parsed[k]; savePresets(existing); refreshPresetList(); announce('í”„ë¦¬ì…‹ ë³‘í•© ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ');
											}catch(err){ alert('ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: '+err); }
											importFile.value = '';
										};
										importFile.click();
									});

									// ì „ì²´ ëŒ€ì²´ ê°€ì ¸ì˜¤ê¸°
									replaceAllBtn.addEventListener('click', ()=>{
										importFile.onchange = async (e)=>{
											const f = e.target.files[0]; if(!f) return;
											try{
												const txt = await f.text(); const parsed = JSON.parse(txt);
												if(typeof parsed !== 'object') throw new Error('ì˜ëª»ëœ í˜•ì‹');
												savePresets(parsed); refreshPresetList(); announce('í”„ë¦¬ì…‹ ëª¨ë‘ ëŒ€ì²´ ì™„ë£Œ');
											}catch(err){ alert('ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨: '+err); }
											importFile.value = '';
										};
										importFile.click();
									});

									// ì´ˆê¸°í™”: ì‚¬ìš©ì ìŠ¤íƒ€ì¼ ë° í”„ë¦¬ì…‹ ì´ˆê¸°í™”
									// í”„ë¦¬ì…‹ë§Œ ì´ˆê¸°í™”
									document.getElementById('resetBtn').addEventListener('click', ()=>{
										if(!confirm('ëª¨ë“  í”„ë¦¬ì…‹ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
										localStorage.removeItem('subPresets');
										refreshPresetList();
										announce('í”„ë¦¬ì…‹ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
									});

									// ìŠ¤íƒ€ì¼ë§Œ ì´ˆê¸°í™” ë²„íŠ¼ ì¶”ê°€
									const styleResetBtn = document.createElement('button'); styleResetBtn.className='btn'; styleResetBtn.type='button'; styleResetBtn.textContent='ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”';
									styleResetBtn.addEventListener('click', ()=>{
										if(!confirm('ì €ì¥ëœ ì‚¬ìš©ì ìŠ¤íƒ€ì¼ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ë˜ëŒë¦¬ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
										localStorage.removeItem('subStyle');
										// CSS ë³€ìˆ˜ ì œê±° ë° UI ì—…ë°ì´íŠ¸
										document.documentElement.style.removeProperty('--sub-font-size');
										document.documentElement.style.removeProperty('--sub-color');
										document.documentElement.style.removeProperty('--sub-bg-opacity');
										document.documentElement.style.removeProperty('--sub-font-family');
										document.documentElement.style.removeProperty('--sub-bottom-offset');
										fontFamilySelect.value = 'system-ui,Segoe UI,Roboto,\'Noto Sans KR\',sans-serif';
										fontSizeRange.value = 20; fontSizeLabel.textContent = '20px';
										fontColor.value = '#ffffff';
										bgRange.value = 60; bgLabel.textContent = '60%';
										bottomRange.value = 6; bottomLabel.textContent = '6%';
										announce('ì‚¬ìš©ì ìŠ¤íƒ€ì¼ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤');
									});

									// ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë²„íŠ¼ì„ settings panelì˜ í•˜ë‹¨ì— ì‚½ì…
									settingsPanel.appendChild(styleResetBtn);

									// ë¯¸ë¦¬ë³´ê¸° ìë™ ë¡¤ë°±
									let previewTimerId = null; let previewRemaining = 0;
									const previewDuration = document.getElementById('previewDuration');
									document.getElementById('previewDurLabel').textContent = previewDuration.value + 's';
									previewDuration.addEventListener('input', ()=>{ document.getElementById('previewDurLabel').textContent = previewDuration.value + 's'; });

									function startPreviewCountdown(seconds){
										if(!autoRollbackChk.checked) return;
										clearPreviewCountdown(); previewRemaining = seconds; rollbackTimer.textContent = previewRemaining + 's';
										previewTimerId = setInterval(()=>{
											previewRemaining -= 1; if(previewRemaining <= 0){ clearPreviewCountdown(); rollbackTimer.textContent = ''; const saved = loadStyleSettings(); if(saved) applyStyleSettings(saved); else loadDefaultStyle(); announce('ë¯¸ë¦¬ë³´ê¸° ë¡¤ë°± ì™„ë£Œ'); }
											else rollbackTimer.textContent = previewRemaining + 's';
										}, 1000);
									}

									function loadDefaultStyle(){
										const defaults = { fontFamily: 'system-ui,Segoe UI,Roboto,\'Noto Sans KR\',sans-serif', fontSize: 20, color: '#ffffff', bgOpacity: 60, bottom: 6 };
										applyStyleSettings(defaults);
										// update UI controls to defaults
										fontFamilySelect.value = defaults.fontFamily;
										fontSizeRange.value = defaults.fontSize; fontSizeLabel.textContent = defaults.fontSize + 'px';
										fontColor.value = defaults.color;
										bgRange.value = defaults.bgOpacity; bgLabel.textContent = defaults.bgOpacity + '%';
										bottomRange.value = defaults.bottom; bottomLabel.textContent = defaults.bottom + '%';
									}
									function clearPreviewCountdown(){ if(previewTimerId) clearInterval(previewTimerId); previewTimerId = null; previewRemaining = 0; rollbackTimer.textContent = ''; }

									// Keyboard help toggle (toggle with '?')
									const kbdHelp = document.getElementById('kbdHelp');
									const closeKbdHelp = document.getElementById('closeKbdHelp');
									document.addEventListener('keydown', (e)=>{
										if(e.key === '?'){
											e.preventDefault();
											const shown = kbdHelp.style.display !== 'none';
											kbdHelp.style.display = shown ? 'none' : 'block';
											if(!shown) { kbdHelp.setAttribute('aria-expanded','true'); kbdHelp.querySelector('button')?.focus(); }
											else { kbdHelp.setAttribute('aria-expanded','false'); }
										}
									});

									closeKbdHelp.addEventListener('click', ()=>{ kbdHelp.style.display = 'none'; kbdHelp.setAttribute('aria-expanded','false'); });


											// ìŠ¤íƒ€ì¼ ì»¨íŠ¸ë¡¤ ì ìš©/ì €ì¥
											function applyStyleSettings(s){
												document.documentElement.style.setProperty('--sub-font-size', s.fontSize + 'px');
												document.documentElement.style.setProperty('--sub-color', s.color);
												document.documentElement.style.setProperty('--sub-bg-opacity', (s.bgOpacity/100).toString());
												document.documentElement.style.setProperty('--sub-font-family', s.fontFamily);
												document.documentElement.style.setProperty('--sub-bottom-offset', s.bottom + '%');
											}

											function saveStyleSettings(s){ localStorage.setItem('subStyle', JSON.stringify(s)); }
											function loadStyleSettings(){ try{ return JSON.parse(localStorage.getItem('subStyle')) || null; }catch(e){ return null; } }

											// ì´ˆê¸°ê°’ ì ìš©
											const initStyle = loadStyleSettings() || { fontFamily: fontFamilySelect.value, fontSize: Number(fontSizeRange.value), color: fontColor.value, bgOpacity: Number(bgRange.value), bottom: Number(bottomRange.value) };
											applyStyleSettings(initStyle);
											fontSizeLabel.textContent = initStyle.fontSize + 'px';
											bgLabel.textContent = initStyle.bgOpacity + '%';
											bottomLabel.textContent = initStyle.bottom + '%';

											// init easing and in/out labels
											inLabel.textContent = inRange.value + 'ms';
											outLabel.textContent = outRange.value + 'ms';
											// init easing variable
											document.documentElement.style.setProperty('--sub-easing', easingSelect.value);
											// init position
											positionSelect.value = 'center';

											// ì´ë²¤íŠ¸ ë°”ì¸ë”©
											fontFamilySelect.addEventListener('change', ()=>{ const s = loadStyleSettings() || {}; s.fontFamily = fontFamilySelect.value; applyStyleSettings(s); saveStyleSettings(s); });
											fontSizeRange.addEventListener('input', ()=>{ const v = Number(fontSizeRange.value); fontSizeLabel.textContent = v + 'px'; const s = loadStyleSettings() || {}; s.fontSize = v; applyStyleSettings(s); saveStyleSettings(s); });
											fontColor.addEventListener('input', ()=>{ const s = loadStyleSettings() || {}; s.color = fontColor.value; applyStyleSettings(s); saveStyleSettings(s); });
											bgRange.addEventListener('input', ()=>{ const v = Number(bgRange.value); bgLabel.textContent = v + '%'; const s = loadStyleSettings() || {}; s.bgOpacity = v; applyStyleSettings(s); saveStyleSettings(s); });
											bottomRange.addEventListener('input', ()=>{ const v = Number(bottomRange.value); bottomLabel.textContent = v + '%'; const s = loadStyleSettings() || {}; s.bottom = v; applyStyleSettings(s); saveStyleSettings(s); });


									if(crossfadeChk) crossfadeChk.addEventListener('change', ()=>{
										// crossfade: ìƒˆ cueê°€ ë“¤ì–´ì˜¬ ë•Œ ê¸°ì¡´ cueë¥¼ ë™ì‹œì— fade outí•˜ì§€ ì•Šê³  ì‚´ì§ ê²¹ì¹˜ê²Œ í•¨
									});

									if(stackChk) stackChk.addEventListener('change', ()=>{
										// ìŠ¤íƒì´ ì¼œì§€ë©´ ìµœëŒ€ ë³´ì—¬ì¤„ ì¤„ ìˆ˜ ì„¤ì •
										if(stackChk.checked) maxStack = 3; else maxStack = 1;
									});

									// Inline subtitles (embedded) â€” íŒŒì¼ ì—†ì´ë„ ë™ì‘í•˜ë„ë¡ ë¯¸ë¦¬ ì •ì˜
									const inlineVtts = {
										'subs_ko.vtt': [
											{ start: 0, end: 4, text: 'ì•ˆë…•í•˜ì„¸ìš”, ì´ ë¹„ë””ì˜¤ëŠ” HTML5 í”Œë ˆì´ì–´ ë°ëª¨ì…ë‹ˆë‹¤.' },
											{ start: 4, end: 8, text: 'ì—¬ê¸°ì„œëŠ” ìë§‰ê³¼ HLS ì¬ìƒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.' },
											{ start: 8, end: 12, text: 'í™”ë©´ì˜ ì»¨íŠ¸ë¡¤ë¡œ ì¬ìƒ, ì¼ì‹œì •ì§€, ë³¼ë¥¨, ì „ì²´í™”ë©´ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' }
										],
										'subs_en.vtt': [
											{ start: 0, end: 4, text: 'Hello â€” this video is a demo of the HTML5 player.' },
											{ start: 4, end: 8, text: 'Here we test subtitles and HLS playback.' },
											{ start: 8, end: 12, text: 'Use the on-screen controls to play, pause, change volume, and go fullscreen.' }
										]
									};

									async function loadVtt(src){
										if(!src) return [];
										if(vttCache[src]) return vttCache[src];
										// ë¨¼ì € ì¸ë¼ì¸ ë°ì´í„° í™•ì¸
										if(inlineVtts[src]){ vttCache[src] = inlineVtts[src]; return vttCache[src]; }
										try{
											const res = await fetch(src);
											const text = await res.text();
											const cues = parseVtt(text);
											vttCache[src] = cues;
											return cues;
										}catch(e){ console.warn('VTT load failed', src, e); return []; }
									}

							// ì•„ì£¼ ê°„ë‹¨í•œ VTT íŒŒì„œ: cue ì‹œì‘/ì¢…ë£Œì™€ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œ
							function parseVtt(text){
								const lines = text.replace(/\r/g,'').split('\n');
								const cues = [];
								let i=0;
								while(i<lines.length){
									const line = lines[i].trim();
									if(!line){ i++; continue; }
															// íƒ€ì„ë¼ì¸ ë¼ì¸ ì°¾ê¸° (ê°„ë‹¨í•œ íŒŒì‹±)
															let timeMatch = null;
															if(line.indexOf('-->') !== -1){
																const parts = line.split('-->');
																const startStr = parts[0].trim();
																const endStr = parts[1].trim();
																timeMatch = [null, startStr, endStr];
															}
															if(timeMatch){
																const start = parseTime(timeMatch[1]);
																const end = parseTime(timeMatch[2]);
										i++;
										let textLines = [];
										while(i<lines.length && lines[i].trim()) { textLines.push(lines[i]); i++; }
										cues.push({ start, end, text: textLines.join('\n') });
									} else { i++; }
								}
								return cues;
							}

							function parseTime(s){ const parts = s.split(':'); const h=Number(parts[0]), m=Number(parts[1]); const sec = Number(parts[2]); return h*3600 + m*60 + sec; }

							// í˜„ì¬ í™œì„± íŠ¸ë™ì˜ srcë¥¼ í™•ì¸í•˜ê³  overlayì— ë Œë”
							async function updateSubtitleOverlay(){
								// ì„ íƒëœ subs select ìš°ì„ 
								const sel = subs.value;
								let src = null;
								if(sel === 'ko') src = 'subs_ko.vtt';
								else if(sel === 'en') src = 'subs_en.vtt';
								else {
									// fallback: first showing track
									const t = Array.from(video.querySelectorAll('track')).find(tr=> tr.mode === 'showing');
									if(t && t.src) src = t.src;
								}
								if(!src){ subOverlay.innerHTML = ''; return; }
								const cues = await loadVtt(src);
								const t = video.currentTime;
								const active = cues.filter(c => t >= c.start && t <= c.end);
										// í˜„ì¬ í‘œì‹œëœ cueë“¤ê³¼ ë¹„êµí•´ ì¶”ê°€/ì œê±° ì²˜ë¦¬ (ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜)
										const existing = Array.from(subOverlay.children);
										const activeText = active.map(a=>a.text);
										// ì œê±°: existing ì¤‘ activeì— ì—†ëŠ” ê²ƒì€ out ì• ë‹ˆë©”ì´ì…˜ ì ìš©
										existing.forEach(el=>{
											if(!activeText.includes(el.textContent)){
												if(!el.classList.contains('out')){ el.classList.remove('in'); el.classList.add('out'); setTimeout(()=> el.remove(), 260); }
											}
										});
												// ì¶”ê°€: active ì¤‘ existingì— ì—†ëŠ” ê²ƒì€ ìƒì„±í•´ in ì• ë‹ˆë©”ì´ì…˜ ì ìš©
												// ìŠ¤íƒ ì œí•œ ë¡œì§
												const toShow = active.slice(0, maxStack);
												toShow.forEach(a=>{
													if(!existing.find(e=> e.textContent === a.text)){
														const d = document.createElement('div'); d.className='cue in'; d.textContent = a.text; subOverlay.appendChild(d);
													}
												});
												// crossfade ì²˜ë¦¬: ë§Œì•½ crossfade í™œì„±ì´ë¼ë©´ ê¸°ì¡´ ìš”ì†Œë¥¼ ë°”ë¡œ outìœ¼ë¡œ í•˜ì§€ ì•Šê³  ìì—°ìŠ¤ëŸ½ê²Œ ìœ ì§€
												try{
													if(crossfadeChk && crossfadeChk.checked){
														// overlap will naturally occur because we don't immediately remove all existing cues
													}
												}catch(e){}
												// ìŠ¤íƒ ì²´í¬ê°€ ìˆë‹¤ë©´ maxStack ë°˜ì˜
												try{ if(stackChk && !stackChk.checked) { /* if unchecked, limit to 1 */ } }catch(e){}
							}

							// videoì˜ timeupdateì—ì„œ ì˜¤ë²„ë ˆì´ ê°±ì‹ 
							video.addEventListener('timeupdate', ()=>{ updateSubtitleOverlay(); updateProgressAria(); });

							// subs select ë³€ê²½ ì‹œ íŠ¸ë™ ë™ê¸°í™” ë° ì˜¤ë²„ë ˆì´ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
							subs.addEventListener('change', ()=>{ const v=subs.value; if(v==='off'){ Array.from(video.querySelectorAll('track')).forEach(t=> t.mode='hidden'); } else if(v==='ko'){ const t=video.querySelector('track[srclang="ko"]'); if(t) t.mode='showing'; } else if(v==='en'){ const t=video.querySelector('track[srclang="en"]'); if(t) t.mode='showing'; } updateSubtitleOverlay(); });


			// ì´ˆê¸° ìƒíƒœ
			video.addEventListener('loadedmetadata', ()=>{ timeEl.textContent = `${formatTime(0)} / ${formatTime(video.duration)}`; updateProgressAria(); });

			// ì—…ë°ì´íŠ¸ ì‹œ aria ë°˜ì˜
			video.addEventListener('timeupdate', ()=>{ updateProgressAria(); });

		</script>
	</body>
</html>

